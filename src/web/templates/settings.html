{% extends "base.html" %}

{% block title %}Settings - PiAlarm{% endblock %}

{% block content %}
<h1>Settings</h1>

<div class="card">
    <form method="post">
        <h2 style="margin-bottom: 20px;">Weather</h2>

        <div class="form-group">
            <label for="weather_api_key">WeatherAPI.com API Key</label>
            <input type="password" id="weather_api_key" name="weather_api_key"
                   value="{{ config.weather_api_key }}" placeholder="Your API key">
            <p style="color: #666; font-size: 12px; margin-top: 5px;">
                Get a free key at <a href="https://www.weatherapi.com" target="_blank" style="color: #4fc3f7;">weatherapi.com</a>
            </p>
        </div>

        <div class="form-group">
            <label for="weather_location">Location</label>
            <input type="text" id="weather_location" name="weather_location"
                   value="{{ config.weather_location }}" placeholder="City name or zip code">
        </div>

        <h2 style="margin: 30px 0 20px;">Display</h2>

        <div class="form-group">
            <label for="timezone">Timezone</label>
            <select id="timezone" name="timezone">
                {% set timezones = [
                    'America/New_York', 'America/Chicago', 'America/Denver',
                    'America/Los_Angeles', 'America/Phoenix', 'Pacific/Honolulu',
                    'Europe/London', 'Europe/Paris', 'Europe/Berlin',
                    'Asia/Tokyo', 'Asia/Shanghai', 'Australia/Sydney'
                ] %}
                {% for tz in timezones %}
                <option value="{{ tz }}" {% if config.timezone == tz %}selected{% endif %}>{{ tz }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="time_format_24h" {% if config.time_format_24h %}checked{% endif %}>
                Use 24-hour time format
            </label>
        </div>

        <h2 style="margin: 30px 0 20px;">Alarm</h2>

        <div class="form-group">
            <label for="snooze_duration">Snooze Duration (minutes)</label>
            <input type="number" id="snooze_duration" name="snooze_duration"
                   value="{{ config.snooze_duration_minutes }}" min="1" max="30">
        </div>

        <button type="submit" class="btn">Save Settings</button>
    </form>
</div>
{% endblock %}
